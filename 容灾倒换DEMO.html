<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>IMS / SBC DR Strategy Deck</title>
    <style>
        :root {
            --primary: #2563eb;       /* Corporate Blue */
            --primary-dark: #1e40af;
            --bg-sidebar: #0f172a;    /* Dark Navy */
            --bg-main: #f1f5f9;       /* Light Grey */
            --text-sidebar: #94a3b8;
            --text-active: #ffffff;
            --card-bg: #ffffff;
            --danger: #ef4444;
            --warning: #f59e0b;
            --success: #10b981;
            --border: #e2e8f0;
            --transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        * { box-sizing: border-box; }

        body {
            margin: 0;
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans SC", sans-serif;
            background-color: var(--bg-main);
            color: #334155;
            height: 100vh;
            display: flex;
            overflow: hidden; /* App-like feel */
        }

        /* --- Language Toggle Logic --- */
        body.lang-zh .en { display: none !important; }
        body.lang-en .zh { display: none !important; }

        /* --- Sidebar (TOC) --- */
        aside {
            width: 280px;
            background-color: var(--bg-sidebar);
            display: flex;
            flex-direction: column;
            border-right: 1px solid #1e293b;
            flex-shrink: 0;
        }

        .brand {
            padding: 1.5rem;
            color: white;
            font-weight: 700;
            font-size: 1.2rem;
            border-bottom: 1px solid #1e293b;
            letter-spacing: 0.5px;
        }

        .nav-scroll {
            flex: 1;
            overflow-y: auto;
            padding: 1rem 0;
        }

        .nav-item {
            padding: 0.8rem 1.5rem;
            cursor: pointer;
            color: var(--text-sidebar);
            font-size: 0.9rem;
            display: flex;
            align-items: center;
            transition: var(--transition);
            border-left: 3px solid transparent;
        }

        .nav-item:hover {
            background-color: rgba(255,255,255,0.05);
            color: #cbd5e1;
        }

        .nav-item.active {
            background-color: rgba(37, 99, 235, 0.1);
            color: var(--text-active);
            border-left-color: var(--primary);
            font-weight: 600;
        }

        .nav-number {
            font-family: 'Courier New', monospace;
            opacity: 0.5;
            margin-right: 10px;
            width: 20px;
        }

        .nav-item.search-match {
            color: var(--warning);
        }

        /* --- Main Content Area --- */
        main {
            flex: 1;
            display: flex;
            flex-direction: column;
            position: relative;
        }

        /* Header Bar */
        header {
            background: white;
            height: 64px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 0 2rem;
            border-bottom: 1px solid var(--border);
            box-shadow: 0 1px 2px rgba(0,0,0,0.05);
        }

        .search-box {
            position: relative;
            width: 300px;
        }

        .search-box input {
            width: 100%;
            padding: 8px 12px 8px 35px;
            border-radius: 6px;
            border: 1px solid var(--border);
            background: #f8fafc;
            font-size: 0.9rem;
        }
        
        .search-icon {
            position: absolute;
            left: 10px;
            top: 50%;
            transform: translateY(-50%);
            color: #94a3b8;
        }

        .controls button {
            padding: 6px 16px;
            border-radius: 20px;
            border: 1px solid var(--border);
            background: white;
            cursor: pointer;
            font-size: 0.85rem;
            font-weight: 600;
            color: var(--primary);
            transition: var(--transition);
        }

        .controls button:hover {
            background: var(--primary);
            color: white;
        }

        /* Slides Container */
        .slides-wrapper {
            flex: 1;
            padding: 2rem;
            overflow-y: auto;
            position: relative;
        }

        .slide {
            display: none;
            max-width: 1000px;
            margin: 0 auto;
            animation: fadeIn 0.4s ease-out;
            padding-bottom: 3rem;
        }

        .slide.active { display: block; }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* Slide Content Styling */
        .slide-header {
            margin-bottom: 2rem;
            border-bottom: 2px solid var(--border);
            padding-bottom: 1rem;
        }

        .slide-number {
            font-size: 4rem;
            font-weight: 800;
            color: #e2e8f0;
            line-height: 1;
            margin-bottom: -10px;
        }

        .slide-title {
            font-size: 1.8rem;
            font-weight: 700;
            color: #1e293b;
            margin: 0;
        }

        .card {
            background: white;
            border-radius: 12px;
            padding: 1.5rem;
            box-shadow: 0 4px 6px -1px rgba(0,0,0,0.1);
            margin-bottom: 1.5rem;
            border-top: 4px solid var(--primary);
        }

        .card.risk { border-top-color: var(--danger); }
        .card.warning { border-top-color: var(--warning); }

        h3 { margin-top: 0; color: #475569; font-size: 1.1rem; display: flex; align-items: center; gap: 8px;}

        /* Tables */
        table { width: 100%; border-collapse: collapse; margin: 1rem 0; font-size: 0.95rem; }
        th { text-align: left; background: #f8fafc; padding: 10px; border-bottom: 2px solid var(--border); color: #64748b; font-size: 0.85rem; text-transform: uppercase; }
        td { padding: 12px 10px; border-bottom: 1px solid var(--border); vertical-align: top; }
        tr:last-child td { border-bottom: none; }

        /* Tags */
        .tag {
            display: inline-block;
            padding: 2px 8px;
            border-radius: 4px;
            font-size: 0.75rem;
            font-weight: 700;
        }
        .tag.risk { background: #fee2e2; color: #991b1b; }
        .tag.ok { background: #dcfce7; color: #166534; }
        .tag.wait { background: #fef3c7; color: #92400e; }

        /* Navigation Buttons at bottom of slide */
        .slide-nav-footer {
            display: flex;
            justify-content: flex-end;
            margin-top: 2rem;
            padding-top: 2rem;
            border-top: 1px solid var(--border);
        }

        .btn-next {
            background: var(--primary);
            color: white;
            border: none;
            padding: 10px 24px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1rem;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .btn-next:hover { background: var(--primary-dark); }

    </style>
</head>
<body class="lang-zh">

    <aside>
        <div class="brand">
            <span class="zh">IMS å®¹ç¾å€’æ¢æŒ‡å—</span>
            <span class="en">IMS DR Guidebook</span>
        </div>
        <div class="nav-scroll" id="sidebar-nav">
            </div>
    </aside>

    <main>
        <header>
            <div class="search-box">
                <span class="search-icon">ğŸ”</span>
                <input type="text" id="searchInput" placeholder="Search / æœç´¢å…³é”®å­—..." onkeyup="filterSlides()">
            </div>
            <div class="controls">
                <button onclick="toggleLang()">
                    <span class="zh">EN / ä¸­æ–‡åˆ‡æ¢</span>
                    <span class="en">Switch to ä¸­æ–‡</span>
                </button>
            </div>
        </header>

        <div class="slides-wrapper">

            <section class="slide active" id="slide-01">
                <div class="slide-header">
                    <div class="slide-number">01</div>
                    <h1 class="slide-title">
                        <span class="zh">æ•´ä½“ç»“è®º (Executive Summary)</span>
                        <span class="en">Executive Summary</span>
                    </h1>
                </div>

                <div class="card warning">
                    <h3>ğŸ“¢ <span class="zh">æ ¸å¿ƒè®¤çŸ¥</span><span class="en">Core Concept</span></h3>
                    <p class="zh">IMS å®¹ç¾å€’æ¢ä¸æ˜¯â€œç¬æ—¶æ— æ„Ÿâ€ã€‚æ ¸å¿ƒé£é™©é›†ä¸­åœ¨ï¼š<strong>ä¿¡ä»¤æ£€æµ‹çª—å£ã€ä¼šè¯åˆ·æ–°ã€HSS/DRA è´Ÿè½½ã€PCRF ä¼šè¯è†¨èƒ€</strong>ã€‚</p>
                    <p class="en">IMS DR switchover is NOT "instant and seamless". Core risks: <strong>Signaling detection window, Session Refresh, HSS/DRA Load, PCRF Session Inflation</strong>.</p>
                </div>

                <div class="card">
                    <h3>ğŸ¯ <span class="zh">å…³é”®ç»“è®º</span><span class="en">Key Conclusions</span></h3>
                    <ul>
                        <li>
                            <span class="zh"><strong>SBC è§’è‰²ï¼š</strong>ä¸æ˜¯æ ¸å¿ƒé£é™©ç‚¹ã€‚çœŸæ­£é£é™©åœ¨ <span class="tag risk">PS/PGW + ç»ˆç«¯è¡Œä¸º</span> (P-CSCF IP é‡åˆ†é…ã€æ³¨å†Œè§¦å‘)ã€‚</span>
                            <span class="en"><strong>SBC Role:</strong> Not the core risk. True risk is <span class="tag risk">PS/PGW + UE Behavior</span> (P-CSCF IP re-assignment, Reg trigger).</span>
                        </li>
                        <li>
                            <span class="zh"><strong>æ¢å¤ä¾èµ–ï¼š</strong>ç”¨æˆ·ä¸å¯èƒ½â€œç¬é—´å…¨éƒ¨åˆ‡åˆ°å¦ä¸€å¥—â€ã€‚æ¢å¤é€Ÿåº¦å¼ºä¾èµ–ï¼š<span class="tag wait">TCP vs UDP</span>ã€æ˜¯å¦è§¦å‘ <span class="tag wait">é‡æ³¨å†Œ / æ–°å‘¼å«</span>ã€‚</span>
                            <span class="en"><strong>Recovery Dependency:</strong> Users won't switch instantly. Depends on <span class="tag wait">TCP vs UDP</span> and triggers like <span class="tag wait">Re-Reg / New Call</span>.</span>
                        </li>
                        <li>
                            <span class="zh"><strong>å€’å›é£é™©ï¼š</strong>å€’å›ï¼ˆæ¢å¤åŸç½‘ï¼‰é˜¶æ®µçš„è´Ÿè½½é£é™©é€šå¸¸ <span class="tag risk">â‰¥ å€’æ¢é˜¶æ®µ</span>ã€‚é‡ç‚¹å…³æ³¨ Cx/Sh å†æ¬¡å‡é«˜ä¸ PCRF Session å†æ¬¡æ”€å‡ã€‚</span>
                            <span class="en"><strong>Rollback Risk:</strong> Rollback load risk is often <span class="tag risk">â‰¥ Switchover</span>. Focus on Cx/Sh surge and PCRF Session climb.</span>
                        </li>
                    </ul>
                </div>
                
                <div class="slide-nav-footer">
                    <button class="btn-next" onclick="nextSlide()">
                        <span class="zh">ä¸‹ä¸€é¡µ: ATS æ•…éšœåˆ†æ</span>
                        <span class="en">Next: ATS Failure Analysis</span> â†’
                    </button>
                </div>
            </section>

            <section class="slide" id="slide-02">
                <div class="slide-header">
                    <div class="slide-number">02</div>
                    <h1 class="slide-title">
                        <span class="zh">Step-1: ATS01 æ•…éšœ (STP ME)</span>
                        <span class="en">Step-1: ATS01 Failure (STP ME)</span>
                    </h1>
                </div>

                <div class="card">
                    <h3>ğŸ“Š <span class="zh">æ•…éšœç‰¹å¾</span><span class="en">Failure Characteristics</span></h3>
                    <p class="zh"><strong>å½±å“ç½‘å…ƒï¼š</strong>MMTEL / SCC / SSF / IP-SM-GW<br><strong>S-CSCF ç¡®è®¤æ—¶é—´ï¼š</strong>çº¦ 30 ç§’ (Detect Window)</p>
                    <p class="en"><strong>Impacted Nodes:</strong> MMTEL / SCC / SSF / IP-SM-GW<br><strong>S-CSCF Confirm Time:</strong> ~30 sec (Detect Window)</p>
                </div>

                <div class="card">
                    <h3>ğŸ“ <span class="zh">è¯­éŸ³ä¸šåŠ¡å½±å“çŸ©é˜µ</span><span class="en">Voice Service Impact Matrix</span></h3>
                    <table>
                        <thead>
                            <tr>
                                <th><span class="zh">åœºæ™¯</span><span class="en">Scenario</span></th>
                                <th><span class="zh">è¡Œä¸º / ç»“æœ</span><span class="en">Behavior / Result</span></th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>
                                    <span class="zh"><strong>Ongoing Call</strong><br>(ATSå‰é‡Šæ”¾)</span>
                                    <span class="en"><strong>Ongoing Call</strong><br>(Released before ATS)</span>
                                </td>
                                <td><span class="tag ok">OK</span> <span class="zh">è®¡è´¹æ­£å¸¸</span><span class="en">Billing Normal</span></td>
                            </tr>
                            <tr>
                                <td>
                                    <span class="zh"><strong>Ongoing Call</strong><br>(åª’ä½“å·²å»ºç«‹)</span>
                                    <span class="en"><strong>Ongoing Call</strong><br>(Media Established)</span>
                                </td>
                                <td>
                                    <span class="tag wait">Partial</span> 
                                    <span class="zh">åª’ä½“ç»§ç»­(RTP OK)ï¼Œä½†è®¡è´¹ä¸ SRVCC å¯èƒ½å¤±è´¥ã€‚ä¼šè¯åˆ·æ–°å¤±è´¥æ—¶é‡Šæ”¾ (Max 30min)ã€‚</span>
                                    <span class="en">Media continues (RTP OK), but Billing/SRVCC may fail. Release on Session Refresh fail (Max 30min).</span>
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    <span class="zh"><strong>New Call</strong><br>(æ£€æµ‹çª—å£å†…)</span>
                                    <span class="en"><strong>New Call</strong><br>(In Detect Window)</span>
                                </td>
                                <td><span class="tag risk">Fail</span> <span class="zh">30så†…æ–°å‘¼å«å¤±è´¥ã€‚æ•…éšœç¡®è®¤åæ¢å¤ã€‚</span><span class="en">Fails within 30s. Recovers after confirmation.</span></td>
                            </tr>
                        </tbody>
                    </table>
                </div>

                <div class="card risk">
                    <h3>âš ï¸ <span class="zh">ä¿¡ä»¤è´Ÿè½½é£é™© (Risk-1)</span><span class="en">Signaling Risk (Risk-1)</span></h3>
                    <ul>
                        <li><span class="zh">Sh ä¿¡ä»¤é«˜äºæ­£å¸¸å¤œé—´ï¼šATS éœ€ä» HSS é‡æ–°ä¸‹è½½æ•°æ®ã€‚</span><span class="en">Sh signaling higher than normal night: ATS redownloads data from HSS.</span></li>
                        <li><span class="zh">ATS01 åˆ° HSS çš„è®¢é˜…æœªå–æ¶ˆï¼ŒHSS å‘é€ PNR å¤±è´¥ï¼Œå½±å“ KPIã€‚</span><span class="en">ATS01 subscription to HSS not cancelled; HSS sends PNR but fails, impacting KPI.</span></li>
                    </ul>
                </div>

                <!-- âœ… æ–°å¢ï¼šä½ è¡¥å……çš„ ATS é˜¶æ®µé£é™©ç‚¹ï¼ˆä¸åˆ é™¤åŸå†…å®¹ï¼‰ -->
                <div class="card risk">
                    <h3>ğŸ§¨ <span class="zh">è¡¥å……é£é™©æ¸…å•ï¼ˆATS é˜¶æ®µï¼‰</span><span class="en">Additional Risk List (ATS Phase)</span></h3>
                    <table>
                        <thead>
                            <tr>
                                <th style="width: 160px;">Risk</th>
                                <th><span class="zh">è¯´æ˜</span><span class="en">Description</span></th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><span class="tag risk">Risk-1</span></td>
                                <td>
                                    <div class="zh">CSCF éœ€è¦çº¦ <strong>30s</strong> æ‰èƒ½ç¡®è®¤ ATS æ•…éšœï¼Œçª—å£å†…ä¸šåŠ¡ä¼šå—å½±å“ã€‚</div>
                                    <div class="en">CSCF needs about <strong>30s</strong> to confirm ATS faulty; services are impacted during the window.</div>
                                </td>
                            </tr>
                            <tr>
                                <td><span class="tag risk">Risk-2</span></td>
                                <td>
                                    <div class="zh">STP æ£€æµ‹åˆ° <strong>IP-SM-GW-1</strong> æ•…éšœåéœ€åˆ‡åˆ° <strong>IP-SM-GW-2</strong>ï¼›å¦åˆ™ <strong>MT-SMS</strong> å¤±è´¥ã€‚</div>
                                    <div class="en">STP must detect <strong>IP-SM-GW-1</strong> faulty and route to <strong>IP-SM-GW-2</strong>, otherwise <strong>MT-SMS</strong> will fail.</div>
                                </td>
                            </tr>
                            <tr>
                                <td><span class="tag risk">Risk-3</span></td>
                                <td>
                                    <div class="zh">ATS02 å¯èƒ½å‡ºç° <strong>License è¿‡è½½</strong> é£é™©ï¼ˆæ‰¿æ¥/è´Ÿè½½ä¸Šç§»ï¼‰ã€‚</div>
                                    <div class="en">Potential <strong>license overload</strong> risk on ATS02 (traffic shifted / takeover load).</div>
                                </td>
                            </tr>
                            <tr>
                                <td><span class="tag risk">Risk-4</span></td>
                                <td>
                                    <div class="zh">ä¸ºä¸‹è½½ç”¨æˆ·æ•°æ®ï¼ŒDRA/HSS çš„ <strong>Sh é“¾è·¯è´Ÿè½½ä¸Šå‡</strong>ã€‚</div>
                                    <div class="en"><strong>Sh link load</strong> on DRA/HSS increases for user data download.</div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>

                <div class="slide-nav-footer">
                    <button class="btn-next" onclick="nextSlide()">Next Step â†’</button>
                </div>
            </section>

            <section class="slide" id="slide-03">
                <div class="slide-header">
                    <div class="slide-number">03</div>
                    <h1 class="slide-title">
                        <span class="zh">Step-2: CSCF STP ME (~10m later)</span>
                        <span class="en">Step-2: CSCF STP ME (~10m later)</span>
                    </h1>
                </div>

                <div class="card">
                    <h3>â±ï¸ <span class="zh">å…³é”®æ—¶å»¶å‚æ•°</span><span class="en">Key Latency Parameters</span></h3>
                    <ul>
                        <li><strong>Detect:</strong> 20s</li>
                        <li><strong>ART (Retransmission):</strong> 6s Ã— 3 + 2s â‰ˆ 20s</li>
                    </ul>
                </div>

                <div class="card">
                    <h3>ğŸ“‰ <span class="zh">ä¸šåŠ¡å½±å“</span><span class="en">Service Impact</span></h3>
                    <table>
                        <tr>
                            <td><span class="zh">Ongoing Call</span><span class="en">Ongoing Call</span></td>
                            <td><span class="zh">é‡Šæ”¾ã€‚æ— è¿é”å½±å“ã€‚</span><span class="en">Released. No chain effect.</span></td>
                        </tr>
                        <tr>
                            <td><span class="zh">New Register/Call</span><span class="en">New Register/Call</span></td>
                            <td>
                                <span class="tag risk">Delay/Fail</span>
                                <span class="zh">å— 20s æ£€æµ‹çª—å£å½±å“ã€‚çª—å£å†…å¤±è´¥ï¼Œç¡®è®¤åæ¢å¤ã€‚</span>
                                <span class="en">Impacted by 20s window. Fails within window, recovers after.</span>
                            </td>
                        </tr>
                    </table>
                </div>

                <div class="card risk">
                    <h3>ğŸŒªï¸ <span class="zh">Cx ä¿¡ä»¤é£æš´</span><span class="en">Cx Signaling Storm</span></h3>
                    <p class="zh">Cx ä¿¡ä»¤æ˜¾è‘—ä¸Šå‡ï¼ŒDRA/HSS é“¾è·¯è´Ÿè½½é«˜äºæ­£å¸¸å¤œé—´ï¼Œéœ€è¦åœ¨å‰²æ¥çª—å£é‡ç‚¹ç›‘æ§ã€‚</p>
                    <p class="en">Significant Cx signaling surge. DRA/HSS link load higher than normal. Monitor closely during window.</p>
                </div>

                <!-- âœ… æ–°å¢ï¼šä½ è¡¥å……çš„ CSCF é˜¶æ®µé£é™©ç‚¹ -->
                <div class="card risk">
                    <h3>ğŸ§¨ <span class="zh">è¡¥å……é£é™©æ¸…å•ï¼ˆCSCF é˜¶æ®µï¼‰</span><span class="en">Additional Risk List (CSCF Phase)</span></h3>
                    <table>
                        <thead>
                            <tr>
                                <th style="width: 160px;">Risk</th>
                                <th><span class="zh">è¯´æ˜</span><span class="en">Description</span></th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><span class="tag risk">Risk-1</span></td>
                                <td>
                                    <div class="zh">P-CSCF éœ€è¦çº¦ <strong>20s</strong> æ£€æµ‹ CSC æ•…éšœï¼Œçª—å£å†…ä¸šåŠ¡å—å½±å“ã€‚</div>
                                    <div class="en">P-CSCF needs about <strong>20s</strong> to detect CSC faulty; services are impacted during the window.</div>
                                </td>
                            </tr>
                            <tr>
                                <td><span class="tag risk">Risk-2</span></td>
                                <td>
                                    <div class="zh"><strong>MO Call/SMS</strong>ï¼šåœ¨æ–°æ³¨å†Œå®Œæˆå‰å¯èƒ½å¤±è´¥ï¼ˆSBC 504ï¼‰ã€‚UE ä¼šåœ¨ä¸€å®šå»¶æ—¶åå‘èµ·åˆ°ç¬¬äºŒä¸ª P-CSCF çš„æ³¨å†Œï¼ˆå®šæ—¶å™¨ä¾ UE å‚å•†ï¼‰ã€‚</div>
                                    <div class="en"><strong>MO Call/SMS</strong> may fail before new registration (SBC returns 504). UE starts Register to 2nd P-CSCF after a delay (timer depends on UE vendors).</div>
                                    <table>
                                        <thead>
                                            <tr>
                                                <th><span class="zh">ç»ˆç«¯</span><span class="en">UE</span></th>
                                                <th><span class="zh">ç»éªŒå€¼å»¶æ—¶</span><span class="en">Delay (Experience)</span></th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr><td>iPhone</td><td>~5s</td></tr>
                                            <tr><td>Samsung</td><td>~5s</td></tr>
                                            <tr><td>Huawei</td><td>~52s</td></tr>
                                        </tbody>
                                    </table>
                                </td>
                            </tr>
                            <tr>
                                <td><span class="tag risk">Risk-3</span></td>
                                <td>
                                    <div class="zh">æ³¨å†Œè´Ÿè½½ä¼šè¢«å‡è¡¡åˆ°å…¶å®ƒ SBCï¼Œå¯èƒ½å¼•å‘ E/// SBC & IMS çš„ <strong>å®¹é‡/License è¿‡è½½é£é™©</strong>ã€‚</div>
                                    <div class="en">Register load balances to other SBCs, which may cause <strong>capacity/license overload</strong> risks on E/// SBC & IMS.</div>
                                </td>
                            </tr>
                            <tr>
                                <td><span class="tag risk">Risk-4</span></td>
                                <td>
                                    <div class="zh">ä¸ºä¸‹è½½ç”¨æˆ·æ•°æ®ï¼ŒDRA/HSS çš„ <strong>Cx é“¾è·¯è´Ÿè½½ä¸Šå‡</strong>ã€‚</div>
                                    <div class="en"><strong>Cx link load</strong> on DRA/HSS increases for user data download.</div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>

                <div class="slide-nav-footer">
                    <button class="btn-next" onclick="nextSlide()">Next Step â†’</button>
                </div>
            </section>

            <section class="slide" id="slide-04">
                <div class="slide-header">
                    <div class="slide-number">04</div>
                    <h1 class="slide-title">
                        <span class="zh">Step-3: SBC01 STP ME (~10m later)</span>
                        <span class="en">Step-3: SBC01 STP ME (~10m later)</span>
                    </h1>
                </div>

                <div class="card warning">
                    <h3><span class="zh">æ£€æµ‹æœºåˆ¶ä¸é™åˆ¶</span><span class="en">Detection & Limitations</span></h3>
                    <p class="zh">CSC Detection é»˜è®¤ 30sã€‚å›  P-CSCF ä½¿ç”¨ IP (é Hostname) æ³¨å†Œï¼Œ<strong>IP æ•…éšœæœŸé—´ UE æ— æ³•å¿«é€Ÿè¿ç§»</strong>ã€‚</p>
                    <p class="en">CSC Detection default 30s. Since P-CSCF uses IP (not Hostname), <strong>UE cannot migrate quickly during IP failure</strong>.</p>
                </div>

                <div class="card risk">
                    <h3>ğŸ’£ <span class="zh">æ ¸å¿ƒé«˜é£é™©ç‚¹ (Risk-2, 3, 4)</span><span class="en">Critical Risks (Risk-2, 3, 4)</span></h3>
                    
                    <div style="margin-bottom: 15px;">
                        <span class="tag risk">Risk-2: MT Call</span>
                        <div class="zh">æœªå®Œæˆé‡æ³¨å†Œå‰ï¼ŒMT Call æŒç»­å¤±è´¥ã€‚</div>
                        <div class="en">MT Call fails continuously until re-registration is complete.</div>
                    </div>

                    <div style="margin-bottom: 15px;">
                        <span class="tag risk">Risk-3: PGW Re-assignment</span>
                        <div class="zh">PGW å¯èƒ½å†æ¬¡åˆ†é…æ•…éšœçš„ P-CSCF IP ç»™ UEï¼Œå¯¼è‡´æ³¨å†Œæ¢å¤æ—¶é—´æ‹‰é•¿ã€‚</div>
                        <div class="en">PGW might re-assign the failed P-CSCF IP to UE, prolonging recovery.</div>
                    </div>

                    <div>
                        <span class="tag risk">Risk-4: PCRF Session Inflation</span>
                        <div class="zh">ç”¨æˆ·æ•°æ® 2å°æ—¶ååˆ é™¤ã€‚PCRF Session æ˜¾è‘—é«˜äºæ­£å¸¸ï¼Œéœ€æ•°å¤©æ¢å¤ (å¾… PGW é‡Šæ”¾ Bearer)ã€‚</div>
                        <div class="en">User data cleared after 2hrs. PCRF Sessions spike significantly, needs days to recover (wait for PGW bearer release).</div>
                    </div>
                </div>

                <!-- âœ… æ–°å¢ï¼šä½ è¡¥å……çš„â€œå…¨é‡é£é™©è¡¨è¿°â€ -->
                <div class="card risk">
                    <h3>ğŸ§¨ <span class="zh">è¡¥å……é£é™©æ¸…å•ï¼ˆSBC/UE è¡Œä¸ºé˜¶æ®µï¼‰</span><span class="en">Additional Risk List (SBC / UE Behavior)</span></h3>
                    <table>
                        <thead>
                            <tr>
                                <th style="width: 160px;">Risk</th>
                                <th><span class="zh">è¯´æ˜</span><span class="en">Description</span></th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><span class="tag risk">Risk-1</span></td>
                                <td>
                                    <div class="zh">åœ¨ UE å°è¯•æ–°çš„æ³¨å†Œä¹‹å‰ï¼Œæ‰€æœ‰ <strong>MO ä¸šåŠ¡</strong> éƒ½ä¼šå¤±è´¥ã€‚</div>
                                    <div class="en">All <strong>MO services</strong> fail until UE tries a new Register.</div>
                                </td>
                            </tr>
                            <tr>
                                <td><span class="tag risk">Risk-2</span></td>
                                <td>
                                    <div class="zh"><strong>MT Call/SMS</strong> ä¾èµ– CS Retry / Transfer ä¸ CSFB Paging æœºåˆ¶ï¼Œè¡¨ç°ä¸ç¡®å®šã€‚</div>
                                    <div class="en"><strong>MT Call/SMS</strong> depends on CS Retry / Transfer with CSFB paging; behavior may vary.</div>
                                </td>
                            </tr>
                            <tr>
                                <td><span class="tag risk">Risk-3</span></td>
                                <td>
                                    <div class="zh">PGW å¯èƒ½å†æ¬¡æŠŠæ•…éšœçš„ P-CSCF IP åˆ†é…ç»™ UEï¼Œå¯¼è‡´éƒ¨åˆ†ç”¨æˆ·æ¢å¤æ—¶é—´å¾ˆé•¿ã€‚</div>
                                    <div class="en">PGW may re-allocate the faulty P-CSCF IP again to UE, so some UEs may take a long time.</div>
                                </td>
                            </tr>
                            <tr>
                                <td><span class="tag risk">Risk-4</span></td>
                                <td>
                                    <div class="zh">PCRF session <strong>å°å¹…å¢åŠ </strong>ï¼ˆfew increasedï¼‰ï¼Œéœ€å…³æ³¨è¶‹åŠ¿ä¸æŒç»­æ—¶é—´ã€‚</div>
                                    <div class="en">PCRF sessions <strong>increase slightly</strong> (few increased); monitor the trend and duration.</div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>

                <div class="slide-nav-footer">
                    <button class="btn-next" onclick="nextSlide()">Next Step â†’</button>
                </div>
            </section>

            <section class="slide" id="slide-05">
                <div class="slide-header">
                    <div class="slide-number">05</div>
                    <h1 class="slide-title">
                        <span class="zh">æ¢å¤ / å€’å›é˜¶æ®µ (Rollback)</span>
                        <span class="en">Recovery / Rollback Phase</span>
                    </h1>
                </div>

                <div class="card warning">
                    <h3>ğŸ“ˆ <span class="zh">ä¿¡ä»¤ä¸è´Ÿè½½åå¼¹</span><span class="en">Signaling & Load Rebound</span></h3>
                    <p class="zh">æ¢å¤ IMS & SBC åï¼ŒCx/Sh (åˆ° HSS) é«˜äºæ¢å¤å‰ï¼ŒDRA/HSS é“¾è·¯å†æ¬¡æ‰¿å‹ã€‚<br>PCRF session ä»ä¼šé«˜äºæ­£å¸¸ï¼Œéœ€æ•°å¤©å›è½ã€‚</p>
                    <p class="en">After recovery, Cx/Sh (to HSS) spikes higher than before. DRA/HSS links under pressure.<br>PCRF sessions remain high, taking days to drop.</p>
                </div>

                <!-- âœ… æ–°å¢ï¼šä½ è¡¥å……çš„ rollback é£é™©ç‚¹ -->
                <div class="card risk">
                    <h3>ğŸ§¨ <span class="zh">è¡¥å……é£é™©æ¸…å•ï¼ˆæ¢å¤/å€’å›ï¼‰</span><span class="en">Additional Risk List (Recovery / Rollback)</span></h3>
                    <table>
                        <thead>
                            <tr>
                                <th style="width: 160px;">Risk</th>
                                <th><span class="zh">è¯´æ˜</span><span class="en">Description</span></th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><span class="tag risk">Risk-1</span></td>
                                <td>
                                    <div class="zh">ATS/SBC/CSCF æ¢å¤åï¼Œç”±äºç”¨æˆ·æ•°æ®è€åŒ–/è¿‡æœŸè§¦å‘é‡æ–°ä¸‹è½½ï¼Œ<strong>DRA/HSS è´Ÿè½½ä¸Šå‡</strong>ã€‚</div>
                                    <div class="en">After ATS/SBC/CSCF restore, <strong>DRA/HSS load increases</strong> to download user data, as user data is aged.</div>
                                </td>
                            </tr>
                            <tr>
                                <td><span class="tag risk">Risk-2</span></td>
                                <td>
                                    <div class="zh">å¦‚æœå¯ç”¨è‡ªåŠ¨ç”¨æˆ·å‡è¡¡ï¼ˆauto user balanceï¼‰ï¼Œæ•´ä½“å›åˆ‡/å›è½å¯èƒ½éœ€è¦ <strong>è¾ƒé•¿æ—¶é—´</strong>ã€‚</div>
                                    <div class="en">It may take a <strong>long time</strong> if auto user balance is enabled.</div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>

                <div class="card">
                    <h3>âœ… <span class="zh">æ“ä½œæ£€æŸ¥ç‚¹</span><span class="en">Checkpoints</span></h3>
                    <ul>
                        <li><span class="zh">ä¸¥æ ¼æŒ‰ Rollback MOP æ‰§è¡Œã€‚</span><span class="en">Strictly follow Rollback MOP.</span></li>
                        <li><span class="zh">æ£€æŸ¥ ATS Plug-in (E/// Repository adaption)ã€‚</span><span class="en">Check ATS Plug-in (E/// Repository adaption).</span></li>
                        <li><span class="zh">SBC ç”¨æˆ·æ¢å¤ä¸æ˜¯ç¬æ—¶ï¼Œå¯èƒ½éœ€æ•°å¤©ã€‚</span><span class="en">SBC user recovery is not instant, may take days.</span></li>
                    </ul>
                </div>

                <div class="slide-nav-footer">
                    <button class="btn-next" onclick="nextSlide()">Next Step â†’</button>
                </div>
            </section>

            <section class="slide" id="slide-06">
                <div class="slide-header">
                    <div class="slide-number">06</div>
                    <h1 class="slide-title">
                        <span class="zh">SBC ä¸“é¡¹ç»“è®º (å·¥ç¨‹åŒ–)</span>
                        <span class="en">SBC Specific Conclusion</span>
                    </h1>
                </div>

                <div class="card">
                    <h3>â“ <span class="zh">åœæ­¢ SBC åï¼Œç”¨æˆ·æ˜¯å¦ç«‹åˆ»â€œä¸Šæ–° SBCâ€ï¼Ÿ</span><span class="en">Do users immediately "jump to new SBC" after stop?</span></h3>
                    <p class="zh"><strong>ç»“è®ºï¼šä¸ä¸€å®šã€‚</strong>å–å†³äºç»ˆç«¯ä¸ä¼ è¾“åè®®ã€‚ç”¨æˆ·è¿ç§»æ˜¯â€œæ¸è¿›å¼â€çš„ã€‚</p>
                    <p class="en"><strong>Conclusion: Not necessarily.</strong> Depends on terminal & transport. Migration is "progressive".</p>
                </div>

                <div class="card">
                    <table>
                        <thead>
                            <tr>
                                <th><span class="zh">åœºæ™¯</span><span class="en">Scenario</span></th>
                                <th><span class="zh">è¡Œä¸º</span><span class="en">Behavior</span></th>
                                <th><span class="zh">ç»“æœ</span><span class="en">Result</span></th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><span class="zh">è§¦å‘æ–°å‘¼å«</span><span class="en">Trigger New Call</span></td>
                                <td><span class="zh">UE é‡é€‰ P-CSCF</span><span class="en">UE Reselect P-CSCF</span></td>
                                <td><span class="tag ok">Fast</span></td>
                            </tr>
                            <tr>
                                <td><strong>TCP</strong> <span class="zh">æ³¨å†Œ</span><span class="en">Reg</span></td>
                                <td><span class="zh">é“¾è·¯ä¸­æ–­ â†’ ç«‹å³é‡æ³¨å†Œ</span><span class="en">Link break â†’ Immediate Re-reg</span></td>
                                <td><span class="tag ok">Fast</span></td>
                            </tr>
                            <tr>
                                <td><strong>UDP</strong> <span class="zh">æ³¨å†Œ</span><span class="en">Reg</span></td>
                                <td><span class="zh">ç­‰å¾…è¶…æ—¶ / åˆ·æ–°å‘¨æœŸ</span><span class="en">Wait for timeout / refresh</span></td>
                                <td><span class="tag wait">Slow / Uncontrollable</span></td>
                            </tr>
                        </tbody>
                    </table>
                </div>

                <div class="slide-nav-footer">
                    <button class="btn-next" onclick="nextSlide()">Next Step â†’</button>
                </div>
            </section>

            <section class="slide" id="slide-07">
                <div class="slide-header">
                    <div class="slide-number">07</div>
                    <h1 class="slide-title">
                        <span class="zh">ä¸€å¥è¯æ€»ç»“</span>
                        <span class="en">Summary</span>
                    </h1>
                </div>

                <div class="card" style="background: var(--bg-sidebar); color: white; border: none; padding: 3rem;">
                    <blockquote style="font-size: 1.5rem; border-left: 5px solid var(--primary); padding-left: 20px; margin: 0;">
                        <span class="zh">IMS å®¹ç¾çš„æœ¬è´¨ä¸æ˜¯â€œç½‘å…ƒåˆ‡æ¢â€ï¼Œè€Œæ˜¯â€œæ£€æµ‹çª—å£ + ä¼šè¯ç”Ÿå‘½å‘¨æœŸ + UE è¡Œä¸º + PS/PGW é‡åˆ†é…â€çš„ç»¼åˆæ•ˆåº”ã€‚</span>
                        <span class="en">IMS DR is not just about "Node Switchover", but the combined effect of "Detection Window + Session Lifecycle + UE Behavior + PS/PGW Re-assignment".</span>
                    </blockquote>
                    <p style="margin-top: 2rem; color: #94a3b8;">
                        <span class="zh">ğŸ‘‰ çœŸæ­£çš„ç›‘æ§é‡ç‚¹ï¼šHSS/DRA, PCRF, & PGW</span>
                        <span class="en">ğŸ‘‰ True Monitoring Focus: HSS/DRA, PCRF, & PGW</span>
                    </p>
                </div>
            </section>

        </div>
    </main>

    <script>
        // Data for Navigation
        const slides = [
            { id: 'slide-01', zh: 'æ•´ä½“ç»“è®º', en: 'Executive Summary' },
            { id: 'slide-02', zh: 'Step-1: ATS æ•…éšœ', en: 'Step-1: ATS Failure' },
            { id: 'slide-03', zh: 'Step-2: CSCF æ•…éšœ', en: 'Step-2: CSCF Failure' },
            { id: 'slide-04', zh: 'Step-3: SBC æ•…éšœ', en: 'Step-3: SBC Failure' },
            { id: 'slide-05', zh: 'æ¢å¤/å€’å›é˜¶æ®µ', en: 'Recovery / Rollback' },
            { id: 'slide-06', zh: 'SBC ä¸“é¡¹ç»“è®º', en: 'SBC Conclusion' },
            { id: 'slide-07', zh: 'ä¸€å¥è¯æ€»ç»“', en: 'One-Liner' }
        ];

        let currentLang = 'zh';

        // Initialize
        function init() {
            renderNav();
            switchSlide(0);
        }

        // Render Navigation
        function renderNav() {
            const nav = document.getElementById('sidebar-nav');
            nav.innerHTML = slides.map((slide, index) => `
                <div class="nav-item" onclick="switchSlide(${index})" id="nav-${index}">
                    <span class="nav-number">0${index + 1}</span>
                    <span class="zh">${slide.zh}</span>
                    <span class="en">${slide.en}</span>
                </div>
            `).join('');
        }

        // Switch Slide
        function switchSlide(index) {
            // Hide all slides
            document.querySelectorAll('.slide').forEach(el => el.classList.remove('active'));
            document.querySelectorAll('.nav-item').forEach(el => el.classList.remove('active'));

            // Show target
            const targetId = slides[index].id;
            document.getElementById(targetId).classList.add('active');
            document.getElementById(`nav-${index}`).classList.add('active');
            
            // Scroll slide wrapper to top
            document.querySelector('.slides-wrapper').scrollTop = 0;
        }

        function nextSlide() {
            const activeNav = document.querySelector('.nav-item.active');
            const currentIndex = parseInt(activeNav.id.split('-')[1]);
            if (currentIndex < slides.length - 1) {
                switchSlide(currentIndex + 1);
            }
        }

        // Toggle Language
        function toggleLang() {
            currentLang = currentLang === 'zh' ? 'en' : 'zh';
            document.body.className = `lang-${currentLang}`;
        }

        // Search Filter
        function filterSlides() {
            const input = document.getElementById('searchInput').value.toLowerCase();
            const navItems = document.querySelectorAll('.nav-item');
            
            navItems.forEach((item, index) => {
                const slideContent = document.getElementById(slides[index].id).innerText.toLowerCase();
                if (input.length > 0 && slideContent.includes(input)) {
                    item.classList.add('search-match');
                } else {
                    item.classList.remove('search-match');
                }
            });
        }

        init();
    </script>
</body>
</html>
